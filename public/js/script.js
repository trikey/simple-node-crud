// Generated by CoffeeScript 1.10.0
(function() {
  var ready, socket;

  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    return $("#wrapper").toggleClass("toggled");
  });

  socket = io();

  ready = false;

  $('#chat').hide();

  $('#name').focus();

  $("form").submit(function(event) {
    return event.preventDefault();
  });

  $("#join").click(function() {
    var name;
    name = $('#name').val();
    if (name !== "") {
      socket.emit("join", name);
      $("#login").detach();
      $("#chat").show();
      $("#msg").focus();
      return ready = true;
    }
  });

  $("#name").keypress(function(e) {
    var name;
    if (e.which === 13) {
      name = $("#name").val();
      if (name !== "") {
        socket.emit("join", name);
        ready = true;
        $("#login").detach();
        $("#chat").show();
        return $("#msg").focus();
      }
    }
  });

  socket.on("update", function(msg) {
    if (ready) {
      return $("#msgs").append("<li>" + msg + "</li>");
    }
  });

  socket.on("update-people", function(people) {
    if (ready) {
      $("#people").empty();
      return $.each(people, function(clientid, name) {
        $('#people').append("<li><strong>" + name + "</strong></li>");
        return $(".people").show();
      });
    }
  });

  socket.on("chat", function(who, msg) {
    if (ready) {
      return $("#msgs").append("<li><strong>" + who + "</strong> пишет: " + msg + "</li>");
    }
  });

  socket.on("disconnect", function() {
    $("#msgs").append("<li><strong style='color: red;'>Не могу подключиться к серверу...</strong> Он меня посылает на хуй :)</li>");
    $("#msg").attr("disabled", "disabled");
    return $("#send").attr("disabled", "disabled");
  });

  $("#send").click(function() {
    var msg;
    msg = $("#msg").val();
    socket.emit("send", msg);
    return $("#msg").val("").focus();
  });

  $("#msg").keypress(function(e) {
    var msg;
    if (e.which === 13) {
      msg = $("#msg").val();
      socket.emit("send", msg);
      return $("#msg").val("");
    }
  });

}).call(this);

//# sourceMappingURL=script.js.map
